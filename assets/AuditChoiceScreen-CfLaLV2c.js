import{u as j,b as w,_ as u,a as P,g as A,j as s,s as k,c as E,z as q,A as Q,r as f,d as I,e as O,B as Te,D as _,P as S,E as ce,i as Re,h as Se,R as ke,v as we,F as Ee}from"./index-DGcQd1Yb.js";import{I as de,A as Me,T as je,d as Pe}from"./ArrowBack-CVzw8aht.js";import{u as ue,a as G,b as Ae,T as Oe,B as $e}from"./Button-Jide-vPS.js";import{r as Ie,m as Ne,c as He,e as Z,d as ze,g as Le,G as _e,S as Be}from"./Select-CfYx1lhb.js";import{c as z,P as V,o as W}from"./Paper-Ceux5gxC.js";import{M as Ue}from"./MenuItem-BwX7yr3f.js";import{b as De,c as Fe}from"./GetAuditForm-Bv3EVsUa.js";function We(e){return j}const qe=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Qe=["component","slots","slotProps"],Ge=["component"];function J(e,t){const{className:n,elementType:o,ownerState:a,externalForwardedProps:r,getSlotOwnerState:l,internalForwardedProps:i}=t,g=w(t,qe),{component:m,slots:v={[e]:void 0},slotProps:C={[e]:void 0}}=r,h=w(r,Qe),c=v[e]||o,d=Ie(C[e],a),x=Ne(u({className:n},g,{externalForwardedProps:e==="root"?h:void 0,externalSlotProps:d})),{props:{component:y},internalRef:p}=x,b=w(x.props,Ge),T=ue(p,d==null?void 0:d.ref,t.ref),R=l?l(b):{},M=u({},a,R),N=e==="root"?y||m:y,$=He(c,u({},e==="root"&&!m&&!v[e]&&i,e!=="root"&&!v[e]&&i,b,N&&{as:N},{ref:T}),M);return Object.keys(R).forEach(H=>{delete $[H]}),[c,$]}function Xe(e){return A("MuiAlert",e)}const Y=P("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Ve=z(s.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Ke=z(s.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Ze=z(s.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Je=z(s.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Ye=z(s.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),et=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],tt=We(),ot=e=>{const{variant:t,color:n,severity:o,classes:a}=e,r={root:["root",`color${E(n||o)}`,`${t}${E(n||o)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return O(r,Xe,a)},nt=k(V,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${E(n.color||n.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?q:Q,n=e.palette.mode==="light"?Q:q;return u({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,o])=>o.main&&o.light).map(([o])=>({props:{colorSeverity:o,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:t(e.palette[o].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${o}StandardBg`]:n(e.palette[o].light,.9),[`& .${Y.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(([,o])=>o.main&&o.light).map(([o])=>({props:{colorSeverity:o,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:t(e.palette[o].light,.6),border:`1px solid ${(e.vars||e).palette[o].light}`,[`& .${Y.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(([,o])=>o.main&&o.dark).map(([o])=>({props:{colorSeverity:o,variant:"filled"},style:u({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${o}FilledColor`],backgroundColor:e.vars.palette.Alert[`${o}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[o].dark:e.palette[o].main,color:e.palette.getContrastText(e.palette[o].main)})}))]})}),st=k("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),rt=k("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),ee=k("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),te={success:s.jsx(Ve,{fontSize:"inherit"}),warning:s.jsx(Ke,{fontSize:"inherit"}),error:s.jsx(Ze,{fontSize:"inherit"}),info:s.jsx(Je,{fontSize:"inherit"})},at=f.forwardRef(function(t,n){const o=tt({props:t,name:"MuiAlert"}),{action:a,children:r,className:l,closeText:i="Close",color:g,components:m={},componentsProps:v={},icon:C,iconMapping:h=te,onClose:c,role:d="alert",severity:x="success",slotProps:y={},slots:p={},variant:b="standard"}=o,T=w(o,et),R=u({},o,{color:g,severity:x,variant:b,colorSeverity:g||x}),M=ot(R),N={slots:u({closeButton:m.CloseButton,closeIcon:m.CloseIcon},p),slotProps:u({},v,y)},[$,H]=J("closeButton",{elementType:de,externalForwardedProps:N,ownerState:R}),[U,D]=J("closeIcon",{elementType:Ye,externalForwardedProps:N,ownerState:R});return s.jsxs(nt,u({role:d,elevation:0,ownerState:R,className:I(M.root,l),ref:n},T,{children:[C!==!1?s.jsx(st,{ownerState:R,className:M.icon,children:C||h[x]||te[x]}):null,s.jsx(rt,{ownerState:R,className:M.message,children:r}),a!=null?s.jsx(ee,{ownerState:R,className:M.action,children:a}):null,a==null&&c?s.jsx(ee,{ownerState:R,className:M.action,children:s.jsx($,u({size:"small","aria-label":i,title:i,color:"inherit",onClick:c},H,{children:s.jsx(U,u({fontSize:"small"},D))}))}):null]}))});function oe(e){return e.substring(2).toLowerCase()}function it(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function lt(e){const{children:t,disableReactTree:n=!1,mouseEvent:o="onClick",onClickAway:a,touchEvent:r="onTouchEnd"}=e,l=f.useRef(!1),i=f.useRef(null),g=f.useRef(!1),m=f.useRef(!1);f.useEffect(()=>(setTimeout(()=>{g.current=!0},0),()=>{g.current=!1}),[]);const v=ue(t.ref,i),C=G(d=>{const x=m.current;m.current=!1;const y=W(i.current);if(!g.current||!i.current||"clientX"in d&&it(d,y))return;if(l.current){l.current=!1;return}let p;d.composedPath?p=d.composedPath().indexOf(i.current)>-1:p=!y.documentElement.contains(d.target)||i.current.contains(d.target),!p&&(n||!x)&&a(d)}),h=d=>x=>{m.current=!0;const y=t.props[d];y&&y(x)},c={ref:v};return r!==!1&&(c[r]=h(r)),f.useEffect(()=>{if(r!==!1){const d=oe(r),x=W(i.current),y=()=>{l.current=!0};return x.addEventListener(d,C),x.addEventListener("touchmove",y),()=>{x.removeEventListener(d,C),x.removeEventListener("touchmove",y)}}},[C,r]),o!==!1&&(c[o]=h(o)),f.useEffect(()=>{if(o!==!1){const d=oe(o),x=W(i.current);return x.addEventListener(d,C),()=>{x.removeEventListener(d,C)}}},[C,o]),s.jsx(f.Fragment,{children:f.cloneElement(t,c)})}function ct(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:o,open:a,resumeHideDuration:r}=e,l=Ae();f.useEffect(()=>{if(!a)return;function p(b){b.defaultPrevented||(b.key==="Escape"||b.key==="Esc")&&(o==null||o(b,"escapeKeyDown"))}return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[a,o]);const i=G((p,b)=>{o==null||o(p,b)}),g=G(p=>{!o||p==null||l.start(p,()=>{i(null,"timeout")})});f.useEffect(()=>(a&&g(t),l.clear),[a,t,g,l]);const m=p=>{o==null||o(p,"clickaway")},v=l.clear,C=f.useCallback(()=>{t!=null&&g(r??t*.5)},[t,r,g]),h=p=>b=>{const T=p.onBlur;T==null||T(b),C()},c=p=>b=>{const T=p.onFocus;T==null||T(b),v()},d=p=>b=>{const T=p.onMouseEnter;T==null||T(b),v()},x=p=>b=>{const T=p.onMouseLeave;T==null||T(b),C()};return f.useEffect(()=>{if(!n&&a)return window.addEventListener("focus",C),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",C),window.removeEventListener("blur",v)}},[n,a,C,v]),{getRootProps:(p={})=>{const b=u({},Z(e),Z(p));return u({role:"presentation"},p,b,{onBlur:h(b),onFocus:c(b),onMouseEnter:d(b),onMouseLeave:x(b)})},onClickAway:m}}function dt(e){return A("MuiSnackbarContent",e)}P("MuiSnackbarContent",["root","message","action"]);const ut=["action","className","message","role"],pt=e=>{const{classes:t}=e;return O({root:["root"],action:["action"],message:["message"]},dt,t)},ft=k(V,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=Te(e.palette.background.default,t);return u({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),gt=k("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),mt=k("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),vt=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiSnackbarContent"}),{action:a,className:r,message:l,role:i="alert"}=o,g=w(o,ut),m=o,v=pt(m);return s.jsxs(ft,u({role:i,square:!0,elevation:6,className:I(v.root,r),ownerState:m,ref:n},g,{children:[s.jsx(gt,{className:v.message,ownerState:m,children:l}),a?s.jsx(mt,{className:v.action,ownerState:m,children:a}):null]}))});function bt(e){return A("MuiSnackbar",e)}P("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const ht=["onEnter","onExited"],xt=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],Ct=e=>{const{classes:t,anchorOrigin:n}=e,o={root:["root",`anchorOrigin${E(n.vertical)}${E(n.horizontal)}`]};return O(o,bt,t)},ne=k("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${E(n.anchorOrigin.vertical)}${E(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return u({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:u({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),yt=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiSnackbar"}),a=ze(),r={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:l,anchorOrigin:{vertical:i,horizontal:g}={vertical:"bottom",horizontal:"left"},autoHideDuration:m=null,children:v,className:C,ClickAwayListenerProps:h,ContentProps:c,disableWindowBlurListener:d=!1,message:x,open:y,TransitionComponent:p=_e,transitionDuration:b=r,TransitionProps:{onEnter:T,onExited:R}={}}=o,M=w(o.TransitionProps,ht),N=w(o,xt),$=u({},o,{anchorOrigin:{vertical:i,horizontal:g},autoHideDuration:m,disableWindowBlurListener:d,TransitionComponent:p,transitionDuration:b}),H=Ct($),{getRootProps:U,onClickAway:D}=ct(u({},$)),[be,K]=f.useState(!0),he=Le({elementType:ne,getSlotProps:U,externalForwardedProps:N,ownerState:$,additionalProps:{ref:n},className:[H.root,C]}),xe=F=>{K(!0),R&&R(F)},Ce=(F,ye)=>{K(!1),T&&T(F,ye)};return!y&&be?null:s.jsx(lt,u({onClickAway:D},h,{children:s.jsx(ne,u({},he,{children:s.jsx(p,u({appear:!0,in:y,timeout:b,direction:i==="top"?"down":"up",onEnter:Ce,onExited:xe},M,{children:v||s.jsx(vt,u({message:x,action:l},c))}))}))}))}),pe=f.createContext();function Tt(e){return A("MuiTable",e)}P("MuiTable",["root","stickyHeader"]);const Rt=["className","component","padding","size","stickyHeader"],St=e=>{const{classes:t,stickyHeader:n}=e;return O({root:["root",n&&"stickyHeader"]},Tt,t)},kt=k("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>u({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":u({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),se="table",wt=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiTable"}),{className:a,component:r=se,padding:l="normal",size:i="medium",stickyHeader:g=!1}=o,m=w(o,Rt),v=u({},o,{component:r,padding:l,size:i,stickyHeader:g}),C=St(v),h=f.useMemo(()=>({padding:l,size:i,stickyHeader:g}),[l,i,g]);return s.jsx(pe.Provider,{value:h,children:s.jsx(kt,u({as:r,role:r===se?null:"table",ref:n,className:I(C.root,a),ownerState:v},m))})}),B=f.createContext();function Et(e){return A("MuiTableBody",e)}P("MuiTableBody",["root"]);const Mt=["className","component"],jt=e=>{const{classes:t}=e;return O({root:["root"]},Et,t)},Pt=k("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),At={variant:"body"},re="tbody",Ot=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiTableBody"}),{className:a,component:r=re}=o,l=w(o,Mt),i=u({},o,{component:r}),g=jt(i);return s.jsx(B.Provider,{value:At,children:s.jsx(Pt,u({className:I(g.root,a),as:r,ref:n,role:r===re?null:"rowgroup",ownerState:i},l))})});function $t(e){return A("MuiTableCell",e)}const X=P("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),It=["align","className","component","padding","scope","size","sortDirection","variant"],Nt=e=>{const{classes:t,variant:n,align:o,padding:a,size:r,stickyHeader:l}=e,i={root:["root",n,l&&"stickyHeader",o!=="inherit"&&`align${E(o)}`,a!=="normal"&&`padding${E(a)}`,`size${E(r)}`]};return O(i,$t,t)},Ht=k("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${E(n.size)}`],n.padding!=="normal"&&t[`padding${E(n.padding)}`],n.align!=="inherit"&&t[`align${E(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>u({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Q(_(e.palette.divider,1),.88):q(_(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${X.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),zt=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiTableCell"}),{align:a="inherit",className:r,component:l,padding:i,scope:g,size:m,sortDirection:v,variant:C}=o,h=w(o,It),c=f.useContext(pe),d=f.useContext(B),x=d&&d.variant==="head";let y;l?y=l:y=x?"th":"td";let p=g;y==="td"?p=void 0:!p&&x&&(p="col");const b=C||d&&d.variant,T=u({},o,{align:a,component:y,padding:i||(c&&c.padding?c.padding:"normal"),size:m||(c&&c.size?c.size:"medium"),sortDirection:v,stickyHeader:b==="head"&&c&&c.stickyHeader,variant:b}),R=Nt(T);let M=null;return v&&(M=v==="asc"?"ascending":"descending"),s.jsx(Ht,u({as:y,ref:n,className:I(R.root,r),"aria-sort":M,scope:p,ownerState:T},h))});function Lt(e){return A("MuiTableContainer",e)}P("MuiTableContainer",["root"]);const _t=["className","component"],Bt=e=>{const{classes:t}=e;return O({root:["root"]},Lt,t)},Ut=k("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Dt=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiTableContainer"}),{className:a,component:r="div"}=o,l=w(o,_t),i=u({},o,{component:r}),g=Bt(i);return s.jsx(Ut,u({ref:n,as:r,className:I(g.root,a),ownerState:i},l))});function Ft(e){return A("MuiTableHead",e)}P("MuiTableHead",["root"]);const Wt=["className","component"],qt=e=>{const{classes:t}=e;return O({root:["root"]},Ft,t)},Qt=k("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Gt={variant:"head"},ae="thead",Xt=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiTableHead"}),{className:a,component:r=ae}=o,l=w(o,Wt),i=u({},o,{component:r}),g=qt(i);return s.jsx(B.Provider,{value:Gt,children:s.jsx(Qt,u({as:r,className:I(g.root,a),ref:n,role:r===ae?null:"rowgroup",ownerState:i},l))})});function Vt(e){return A("MuiTableRow",e)}const ie=P("MuiTableRow",["root","selected","hover","head","footer"]),Kt=["className","component","hover","selected"],Zt=e=>{const{classes:t,selected:n,hover:o,head:a,footer:r}=e;return O({root:["root",n&&"selected",o&&"hover",a&&"head",r&&"footer"]},Vt,t)},Jt=k("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${ie.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${ie.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:_(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),le="tr",fe=f.forwardRef(function(t,n){const o=j({props:t,name:"MuiTableRow"}),{className:a,component:r=le,hover:l=!1,selected:i=!1}=o,g=w(o,Kt),m=f.useContext(B),v=u({},o,{component:r,hover:l,selected:i,head:m&&m.variant==="head",footer:m&&m.variant==="footer"}),C=Zt(v);return s.jsx(Jt,u({as:r,ref:n,className:I(C.root,a),role:r===le?null:"row",ownerState:v},g))}),ge=({children:e})=>{const t=ce(),n=Re(),o=t.state?t.state.name:"Default Screen Name",a=()=>{n("/auditform")};return s.jsxs("div",{children:[s.jsx(Me,{position:"static",sx:{backgroundColor:"#00BBF2"},children:s.jsxs(je,{children:[s.jsx(de,{color:"inherit",edge:"start",onClick:a,sx:{mr:2},children:s.jsx(Pe,{})}),s.jsx(Oe,{variant:"h6",component:"div",sx:{flexGrow:1},children:o})]})}),e]})};ge.propTypes={children:S.node.isRequired};function Yt(e){if(e===3)return"green";if(e===2)return"#ffd21f";if(e===1)return"red";if(e===0)return"grey";if(e==="")return"orange"}const eo="http://localhost:3001",to={postScores:async e=>(await Se.post(`${eo}/auditPostForm`,e)).data},oo=ke.forwardRef(function(t,n){return s.jsx(at,{elevation:6,ref:n,variant:"filled",...t})});function me({open:e,handleClose:t}){return s.jsx(yt,{open:e,autoHideDuration:3e3,onClose:t,children:s.jsx(oo,{onClose:t,severity:"success",sx:{width:"100%"},children:"บันทึกข้อมูลเรียบร้อยแล้ว !"})})}me.propTypes={open:S.bool.isRequired,handleClose:S.func.isRequired};const L=k(zt)(({theme:e})=>({[`&.${X.head}`]:{backgroundColor:"#00BBF2",color:e.palette.common.white,fontSize:20,borderBottom:"2px solid white"},[`&.${X.body}`]:{fontSize:16,borderBottom:"1px solid rgba(224, 224, 224, 1)"}})),no=k(fe)(({theme:e})=>({"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function ve({question:e,result:t,auditGroupId:n,plantNo:o,userId:a}){const r={};f.useEffect(()=>{if(t&&t.length>0){const h={};t.forEach(c=>{h[c.QUESTION_ID]=c.K_SCORE}),i(h)}},[t]);const[l,i]=f.useState(r),[g,m]=f.useState(!1),v=(h,c)=>{i(d=>({...d,[h]:c})),console.log(l)},C=async()=>{const h=e.map(c=>{const d=c.CHOICE.find(x=>x.score===l[c.QUESTION_ID]);return{audit_group_id:n,question_id:c.QUESTION_ID,plant_no:o,choice_no:d?d.no:null,choice_results:d?d.description:null,k_score:d?d.score:null,create_by_user_id:a}});try{const c=await to.postScores(h);console.log("Form submitted successfully:",c),m(!0)}catch(c){console.error("Error submitting form:",c)}};return s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[s.jsx(Dt,{component:V,sx:{borderRadius:5},children:s.jsxs(wt,{sx:{minWidth:300},"aria-label":"customized table",children:[s.jsx(Xt,{children:s.jsxs(fe,{children:[s.jsx(L,{align:"center",children:"รายการ"}),s.jsx(L,{align:"center",children:"ผล Verify"})]})}),s.jsx(Ot,{children:e.map(h=>s.jsxs(no,{children:[s.jsx(L,{component:"th",scope:"row",children:h.QUESTION_TEXT}),s.jsx(L,{align:"center",children:s.jsx(Be,{value:l[h.QUESTION_ID]||"",onChange:c=>v(h.QUESTION_ID,c.target.value),sx:{width:150,borderRadius:5,textAlign:"center",backgroundColor:Yt(l[h.QUESTION_ID]),border:"none",color:"white"},children:h.CHOICE.map(c=>s.jsx(Ue,{value:c.score,children:c.description},c.no))})})]},h.QUESTION_ID))})]})}),s.jsx($e,{variant:"contained",color:"primary",onClick:C,style:{marginTop:20},children:"Submit"}),s.jsx(me,{open:g,handleClose:()=>m(!1)})]})}ve.propTypes={question:S.arrayOf(S.shape({QUESTION_ID:S.any.isRequired,QUESTION_TEXT:S.string.isRequired,CHOICE:S.arrayOf(S.shape({no:S.any.isRequired,score:S.any.isRequired,description:S.string.isRequired}))})).isRequired,auditGroupId:S.any.isRequired,plantNo:S.string.isRequired,userId:S.any.isRequired,result:S.array};function po(){const{state:{GroupId:e}}=ce(),[t,n]=f.useState([]),[o,a]=f.useState([]),[r,l]=f.useState(!0),i=we();async function g(){try{const[m,v]=await Promise.all([De(e),Fe(e,i)]);n(m),a(v),console.log("from Questions",m),console.log("from Results",v)}catch(m){console.error("Error fetching audit data:",m)}finally{l(!1)}}return f.useEffect(()=>{g()},[]),s.jsx(ge,{children:s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",marginTop:"30px"},children:s.jsx(ve,{question:t,result:o,auditGroupId:e,plantNo:i,userId:Ee()})})})}export{po as default};
